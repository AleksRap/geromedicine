{"version":3,"sources":["script.js"],"names":["document","addEventListener","vh","window","innerHeight","documentElement","style","setProperty","concat","header","querySelector","clientHeight","coversArticles","querySelectorAll","length","forEach","cover","height","clientWidth","navigation","burger","coversCardsArt","event","this","classList","toggle","closest","itemOpen","target","contains","arrDropdownItem","item","remove","add","firstMenu","secondMenu","secondMenuMb","getComputedStyle","marginBottom","split","join","mb","transferNavbarSecond","pageYOffset","scrollHeight","Swiper","slidesPerView","initialSlide","centeredSlides","spaceBetween","loop","el","delay","clickable","nextEl","prevEl","lazy","slideToClickedSlide","swiperSpecialist","allowTouchMove","480","breakpoints","swipersComments","autoplay","display","clinicWrap","specialistWrap","btnClinic","btnSpecialist","toggleFeedback","scrollTop","videoScrollTop","videoWrap","Math","ceil","video","getBoundingClientRect","top","removeEventListener","urlVideo","source","setAttribute","loadVideo","dataset","src","load","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","paused","play","background","controls","pause","stop","_x","apply","arguments","$","datepicker","minDate","Date","onSelect","dateText","val","Modal","idModal","selectorBtnOpen","modalCallFeedback","modalDoctorCall","modalFeedback","checkAgree","getElementById","modalThanksFeedback","modalThanksAppointment","anchor","e","preventDefault","getAttribute","btn","toggleAttribute","elementClick","destination","normalName","offset","mask","anchors","fancybox","toolbar","spoilerWrap","spoiler","Spoiler","banner","spoilers","ManagementEvents","data","arr","fn","splice","arrEvents","_modal","_modalWindow","_btnsOpen","_btnClose","bind","_this","addEventToArr","open","close","removeEvents","_classCallCheck","_initialize","body","_this2","closeAll"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  /**\r\n   * 100vh - высота без учета панелей инструментов на мобильных\r\n   */\r\n  const vh = window.innerHeight * 0.01;\r\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\r\n\r\n  const header = document.querySelector('.header').clientHeight;\r\n  document.documentElement.style.setProperty('--header', `${header}px`);\r\n\r\n\r\n  /**\r\n   * Обложки статей в соотношении 3.6\r\n   */\r\n  const coversArticles = document.querySelectorAll('.article__pic');\r\n  if (coversArticles.length) coversArticles.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\r\n\r\n  /**\r\n   * Обложки статей в соотношении 3.6\r\n   */\r\n  const coversCardsArt = document.querySelectorAll('.article-card__img');\r\n  if (coversCardsArt.length) coversCardsArt.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\r\n\r\n\r\n  /**\r\n   * Если видно мобильное меню\r\n   */\r\n  const screenWidth = document.documentElement.clientWidth;\r\n  if (screenWidth < 1200) {\r\n\r\n    /**\r\n     * Открытие мобильного меню\r\n     */\r\n    const burger = document.querySelector('.burger');\r\n    burger.addEventListener('click', function (event) {\r\n      this.classList.toggle('open');\r\n      this\r\n        .closest('.navigation')\r\n        .querySelector('.navigation__content')\r\n        .classList.toggle('open');\r\n    });\r\n\r\n    /**\r\n     * Переключение открытой навигации\r\n     */\r\n    const navigation = document.querySelector('.navigation');\r\n    const arrDropdownItem = navigation.querySelectorAll('.navigation__item');\r\n\r\n    navigation.addEventListener('click', event => {\r\n      /**\r\n       * Если клик был не по пункту с дропдауном, то выходим\r\n       */\r\n        const target = event.target.closest('.navigation__item_drop');\r\n        if (!target) return;\r\n\r\n      /**\r\n       * Если клик был по ссылке внутри дропдауна, то выходим\r\n       */\r\n      const subItem = event.target.closest('.navigation__link');\r\n      if (!subItem) return;\r\n\r\n      event.preventDefault();\r\n\r\n      const itemOpen = target.classList.contains('open');\r\n\r\n      /**\r\n       * Закрываем все пункты\r\n       */\r\n      arrDropdownItem.forEach(item => item.closest('.open') && item.classList.remove('open'));\r\n\r\n      /**\r\n       * Открываем нужный\r\n       */\r\n      !itemOpen && target.classList.add('open');\r\n    })\r\n  }\r\n\r\n\r\n  /** Прилипание меню после прокрутки */\r\n  const firstMenu = document.querySelector('.navbar-first');\r\n  const secondMenu = document.querySelector('.navbar-second');\r\n  const secondMenuMb = +getComputedStyle(secondMenu).marginBottom.split('px').join('');\r\n  const scrollHeight = firstMenu.clientHeight;\r\n  const mb = secondMenu.clientHeight + secondMenuMb;\r\n\r\n  function transferNavbarSecond() {\r\n    window.pageYOffset > scrollHeight\r\n      ? secondMenu.classList.add('navbar-second_glue')\r\n      : secondMenu.classList.remove('navbar-second_glue');\r\n\r\n    window.pageYOffset > scrollHeight\r\n      ? firstMenu.style.marginBottom = `${mb}px`\r\n      : firstMenu.style.marginBottom = '0px';\r\n  }\r\n\r\n  transferNavbarSecond();\r\n  window.addEventListener('scroll', transferNavbarSecond);\r\n\r\n\r\n  /** Инициализация слайдеров swiper */\r\n  const swiperMain = new Swiper('.swiper-main', {\r\n    slidesPerView: 'auto',\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    spaceBetween: 30,\r\n    loop: true,\r\n    // autoplay: true,\r\n    delay: 5000,\r\n    pagination: {\r\n      el: '.swiper-pagination',\r\n      clickable: true,\r\n    },\r\n    navigation: {\r\n      prevEl: '.swiper-main__prev',\r\n      nextEl: '.swiper-main__next'\r\n    },\r\n    slideToClickedSlide: true,\r\n    preloadImages: false,\r\n    lazy: true,\r\n    loadOnTransitionStart: true\r\n  });\r\n\r\n  const swiperSpecialist = new Swiper('.swiper-specialist', {\r\n    initialSlide: 0,\r\n    spaceBetween: 30,\r\n    centeredSlides: false,\r\n    allowTouchMove: false,\r\n    navigation: {\r\n      nextEl: '.specialists__next',\r\n      prevEl: '.specialists__prev',\r\n    },\r\n    breakpoints: {\r\n      480: {\r\n        spaceBetween: 10,\r\n        slidesPerView: 2\r\n      },\r\n      768: {\r\n        spaceBetween: 20,\r\n        slidesPerView: 3\r\n      },\r\n      992: {\r\n        slidesPerView: 4\r\n      },\r\n      1200: {\r\n        slidesPerView: 5\r\n      },\r\n      1500: {\r\n        slidesPerView: 6\r\n      }\r\n    }\r\n  });\r\n\r\n  const swipersComments = new Swiper('.swiper-comments', {\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    loop: true,\r\n    autoplay: false,\r\n    navigation: {\r\n      nextEl: '.comments__next',\r\n      prevEl: '.comments__prev',\r\n    },\r\n  });\r\n\r\n  const swipersComments2 = new Swiper('.swiper-comments-2', {\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    loop: true,\r\n    autoplay: false,\r\n    navigation: {\r\n      nextEl: '.comments__next',\r\n      prevEl: '.comments__prev',\r\n    },\r\n  });\r\n\r\n\r\n  /**\r\n   * После инициализации всех слайдеров с комментами скрываем их\r\n   * видны будут только те у которых есть класс .active\r\n   */\r\n  const commentsWrap = document.querySelectorAll('.comments__swiper');\r\n  commentsWrap.forEach(el => el.style.display = 'none');\r\n\r\n\r\n  /** Табы внутри блока отзывов */\r\n  const clinicWrap = document.querySelector('[data-wrap=\"clinic\"]');\r\n  const specialistWrap = document.querySelector('[data-wrap=\"specialist\"]');\r\n  const btnClinic = document.querySelector('[data-btn=\"clinic\"]');\r\n  const btnSpecialist = document.querySelector('[data-btn=\"specialist\"]');\r\n\r\n  function toggleFeedback() {\r\n    btnClinic.classList.toggle('active');\r\n    btnSpecialist.classList.toggle('active');\r\n    clinicWrap.classList.toggle('active');\r\n    specialistWrap.classList.toggle('active');\r\n  }\r\n\r\n  btnClinic && btnClinic.addEventListener('click', toggleFeedback);\r\n  btnSpecialist && btnSpecialist.addEventListener('click', toggleFeedback);\r\n\r\n\r\n  /**\r\n   * Ленивая загрузка видео\r\n   * событие скролла удаляется по достижению 50% прокрутки до видео\r\n   */\r\n  const videoWrap = document.querySelector('.video');\r\n\r\n  if (videoWrap) {\r\n    const video = videoWrap.querySelector('video');\r\n    const videoScrollTop = Math.ceil(video.getBoundingClientRect().top);\r\n\r\n    window.addEventListener('scroll', loadVideo);\r\n\r\n    function loadVideo() {\r\n      const scrollTop = window.pageYOffset;\r\n\r\n      if (scrollTop > videoScrollTop / 2) {\r\n        window.removeEventListener('scroll', loadVideo);\r\n\r\n        const source = video.querySelector('source');\r\n        const urlVideo = source.dataset.src;\r\n        source.setAttribute('src', urlVideo);\r\n        video.load();\r\n\r\n        /** Вешаем обработчик на воспроизведение/остановку видео */\r\n        videoWrap.addEventListener('click', async event => {\r\n\r\n          if (video.paused) {\r\n            await video.play();\r\n            videoWrap.style.background = 'url(../images/other/pattern.png) center repeat';\r\n            video.controls = true;\r\n          } else {\r\n            video.pause();\r\n            video.controls = false;\r\n          }\r\n\r\n          event.target.closest('.video').classList.toggle('play');\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /** Календарь в модалке */\r\n  $('#datepicker').datepicker({\r\n    minDate: new Date(),\r\n    onSelect: function (dateText) {\r\n      $('#appointment-date').val(dateText);\r\n    }\r\n  });\r\n\r\n\r\n  /** Инициализация модалок */\r\n  const modalCallFeedback = new Modal({\r\n    idModal: 'modal-call-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-call-feedback-btn\"]'\r\n  });\r\n\r\n  const modalDoctorCall = new Modal({\r\n    idModal: 'modal-doctor-call',\r\n    selectorBtnOpen: '[data-btn=\"modal-doctor-call-btn\"]'\r\n  });\r\n\r\n  const modalAppointment = new Modal({\r\n    idModal: 'modal-appointment',\r\n    selectorBtnOpen: '[data-btn=\"modal-appointment-btn\"]'\r\n  });\r\n\r\n  const modalFeedback = new Modal({\r\n    idModal: 'modal-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-feedback-btn\"]'\r\n  });\r\n\r\n  const modalThanksFeedback = new Modal({\r\n    idModal: 'modal-thanks-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-thanks-feedback-btn\"]'\r\n  });\r\n\r\n  const modalThanksAppointment = new Modal({\r\n    idModal: 'modal-thanks-appointment',\r\n    selectorBtnOpen: '[data-btn=\"modal-thanks-appointment-btn\"]'\r\n  });\r\n\r\n\r\n  /** Проверка согласия на обработку персональных данных */\r\n  function checkAgree() {\r\n    const btn = this.closest('form').querySelector('.button');\r\n    btn.toggleAttribute('disabled');\r\n  }\r\n  document.getElementById('call-feedback-checkbox').addEventListener('change', checkAgree);\r\n  document.getElementById('doctor-call-checkbox').addEventListener('change', checkAgree);\r\n  document.getElementById('appointment-checkbox').addEventListener('change', checkAgree);\r\n\r\n\r\n  /** Плавная прокрутка до якоря */\r\n  const anchors = document.querySelectorAll('a[href*=\"$\"]');\r\n  if (anchors.length) {\r\n    anchors.forEach(anchor => {\r\n      anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        const elementClick = this.getAttribute('href').split('');\r\n        elementClick.splice(0, 1, '#');\r\n        const normalName = elementClick.join('');\r\n        const destination = $(normalName).offset().top - 130;\r\n\r\n        $(\"html:not(:animated),body:not(:animated)\").animate({scrollTop: destination}, 1100);\r\n      })\r\n    });\r\n  }\r\n\r\n\r\n  /** Маска номера телефона на поля. Maskedinput */\r\n  $(\"#call-feedback-tel\").mask(\"+7 (999) 999-9999\");\r\n  $(\"#call-doctor-call-tel\").mask(\"+7 (999) 999-9999\");\r\n  $(\"#call-appointment-tel\").mask(\"+7 (999) 999-9999\");\r\n\r\n\r\n  /** Инициализация галереи fancybox */\r\n  document.querySelector('[data-fancybox=\"gallery\"]') && $('[data-fancybox=\"gallery\"]').fancybox({\r\n    toolbar: false,\r\n    transitionEffect: \"zoom-in-out\",\r\n    loop: true\r\n  });\r\n\r\n\r\n  /** Спойлеры услуг */\r\n  const spoilerWrap = document.querySelector('.amenities__spoilers');\r\n  if (spoilerWrap) {\r\n    const spoilers = document.querySelectorAll('.spoiler');\r\n    spoilers.forEach(spoiler => {\r\n      new Spoiler({\r\n        spoiler,\r\n        wrap: spoilerWrap\r\n      })\r\n    });\r\n  }\r\n\r\n\r\n  /** Соотношение сторон баннера акций */\r\n  const bannersStock = document.querySelectorAll('.banner-stock');\r\n  bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 6}px`);\r\n});\r\n\r\n\r\n/** Управляем событиями */\r\nclass ManagementEvents {\r\n\r\n  /**\r\n   * На входе принимаем объект с параметрами\r\n   * arr   - массив куда сохраняем события\r\n   * el    - элемент, на который навешиваем обработчик\r\n   * event - событие (str)\r\n   * fn    - анонимная функция без вызова\r\n   * @param data\r\n   */\r\n  static addEventToArr(data) {\r\n    /** Добавляем событие в массив */\r\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\r\n\r\n    /** Вешаем слушатель */\r\n    data.el.addEventListener(data.event, data.fn);\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * На входе принимаем массив событий\r\n   * @param arr\r\n   */\r\n  static removeEvents(arr) {\r\n    /** Снимаем обработчики события */\r\n    arr.forEach(item => {\r\n      item.el.removeEventListener(item.event, item.fn)\r\n    });\r\n\r\n    /** Очищаем массив */\r\n    arr.splice(0, arr.length);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nclass Modal {\r\n  constructor(data) {\r\n    this.arrEvents = [];\r\n    this._modal = document.getElementById(data.idModal);\r\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\r\n\r\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\r\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\r\n\r\n    this.bind();\r\n  }\r\n\r\n  open() {\r\n    this._modal.classList.add('modal_open');\r\n    this._modalWindow.classList.add('modal__window_open');\r\n  }\r\n  close() {\r\n    this._modal.classList.remove('modal_open');\r\n    this._modalWindow.classList.remove('modal__window_open');\r\n  }\r\n\r\n  bind() {\r\n    /**\r\n     * Открытие модалки по клику на кнопку\r\n     */\r\n    this._btnsOpen.forEach(btn => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btn,\r\n        event: 'click',\r\n        fn: () => this.open()\r\n      });\r\n    });\r\n\r\n\r\n    /**\r\n     * Закрытие модалки по клику вне нее\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._modal,\r\n      event: 'click',\r\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\r\n    });\r\n\r\n    /**\r\n     * Закрытие модалки по клику на крестик\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._btnClose,\r\n      event: 'click',\r\n      fn: () => this.close()\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    ManagementEvents.removeEvents(this.arrEvents);\r\n    this._modal.remove();\r\n  }\r\n}\r\n\r\nclass Spoiler {\r\n  constructor(data) {\r\n    this.spoiler = data.spoiler;\r\n    this.body = this.spoiler.querySelector('.spoiler__body');\r\n    this.wrap = data.wrap;\r\n    this.spoilers = null;\r\n    this.height = null;\r\n\r\n    this._initialize();\r\n  }\r\n\r\n  open() {\r\n    this.spoiler.classList.add('open');\r\n    this.body.style.height = `${this.height}px`;\r\n  }\r\n\r\n  close() {\r\n    this.spoiler.classList.remove('open');\r\n    this.body.style.height = '0px';\r\n  }\r\n\r\n  closeAll() {\r\n    this.spoilers.forEach(spoiler => {\r\n      spoiler.classList.remove('open');\r\n      spoiler.querySelector('.spoiler__body').style.height = '0px';\r\n    });\r\n  }\r\n\r\n  _initialize() {\r\n    this.height = this.body.clientHeight;\r\n    this.body.style.height = '0px';\r\n\r\n    /** если есть this.wrap, значит включен режим аккордеона */\r\n    if (this.wrap) this.spoilers = this.wrap.querySelectorAll('.spoiler');\r\n\r\n    this.spoiler.addEventListener('click', event => {\r\n      const spoiler = event.target.closest('.spoiler');\r\n      if (!spoiler) return;\r\n\r\n      /** открываем или закрываем спойлер */\r\n      const open = spoiler.classList.contains('open');\r\n      if (open) {\r\n        this.close();\r\n      } else {\r\n        this.wrap && this.closeAll();\r\n        this.open();\r\n      }\r\n    });\r\n  }\r\n}"]}