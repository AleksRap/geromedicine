{"version":3,"sources":["script.js"],"names":["document","addEventListener","screenWidth","documentElement","clientWidth","vh","window","innerHeight","style","setProperty","concat","header","querySelector","clientHeight","coversArticles","querySelectorAll","length","forEach","cover","height","coversCardsArt","navigation","arrDropdownItem","bannersStock","banner","event","this","closest","classList","toggle","burger","target","preventDefault","contains","item","remove","itemOpen","add","firstMenu","secondMenu","secondMenuMb","getComputedStyle","marginBottom","split","join","scrollHeight","transferNavbarSecond","pageYOffset","initialSlide","centeredSlides","spaceBetween","slidesPerView","loop","autoplay","pagination","el","clickable","prevEl","nextEl","loadOnTransitionStart","lazy","delay","preloadImages","allowTouchMove","480","breakpoints","Swiper","display","clinicWrap","specialistWrap","btnClinic","btnSpecialist","toggleFeedback","scrollTop","videoScrollTop","videoWrap","Math","ceil","video","getBoundingClientRect","top","removeEventListener","urlVideo","source","setAttribute","loadVideo","dataset","src","load","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","paused","play","background","controls","pause","stop","_x","apply","arguments","$","datepicker","minDate","Date","onSelect","dateText","val","Modal","idModal","selectorBtnOpen","modalCallFeedback","modalDoctorCall","modalFeedback","checkAgree","getElementById","modalThanksFeedback","modalThanksAppointment","anchor","e","getAttribute","btn","toggleAttribute","elementClick","destination","normalName","offset","mask","anchors","fancybox","toolbar","spoilerWrap","spoiler","Spoiler","ManagementEvents","data","arr","push","fn","splice","_classCallCheck","arrEvents","_modalWindow","_modal","_btnsOpen","_btnClose","bind","_this","addEventToArr","open","close","removeEvents","_initialize","body","spoilers","_this2","closeAll"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const screenWidth = document.documentElement.clientWidth;\n\n  /**\n   * 100vh - высота без учета панелей инструментов на мобильных\n   */\n  const vh = window.innerHeight * 0.01;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n  const header = document.querySelector('.header').clientHeight;\n  document.documentElement.style.setProperty('--header', `${header}px`);\n\n\n  /**\n   * Обложки статей в соотношении 3.6\n   */\n  const coversArticles = document.querySelectorAll('.article__pic');\n  if (coversArticles.length) coversArticles.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\n\n  /**\n   * Обложки статей в соотношении 3.6\n   */\n  const coversCardsArt = document.querySelectorAll('.article-card__img');\n  if (coversCardsArt.length) coversCardsArt.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\n\n  /**\n   * Соотношение сторон баннера акций 6:1 (ПК), 330:200 (мобилки, ниже 480px)\n   */\n  const bannersStock = document.querySelectorAll('.banner-stock');\n  screenWidth <= 480\n    ? bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 1.65}px`)\n    : bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 6}px`);\n\n\n  /**\n   * Если видно мобильное меню\n   */\n  if (screenWidth < 1200) {\n\n    /**\n     * Открытие мобильного меню\n     */\n    const burger = document.querySelector('.burger');\n    burger.addEventListener('click', function (event) {\n      this.classList.toggle('open');\n      this\n        .closest('.navigation')\n        .querySelector('.navigation__content')\n        .classList.toggle('open');\n    });\n\n    /**\n     * Переключение открытой навигации\n     */\n    const navigation = document.querySelector('.navigation');\n    const arrDropdownItem = navigation.querySelectorAll('.navigation__item');\n\n    navigation.addEventListener('click', event => {\n      /**\n       * Если клик был не по пункту с дропдауном, то выходим\n       */\n        const target = event.target.closest('.navigation__item_drop');\n        if (!target) return;\n\n      /**\n       * Если клик был по ссылке внутри дропдауна, то выходим\n       */\n      const subItem = event.target.closest('.navigation__link');\n      if (!subItem) return;\n\n      event.preventDefault();\n\n      const itemOpen = target.classList.contains('open');\n\n      /**\n       * Закрываем все пункты\n       */\n      arrDropdownItem.forEach(item => item.closest('.open') && item.classList.remove('open'));\n\n      /**\n       * Открываем нужный\n       */\n      !itemOpen && target.classList.add('open');\n    })\n  }\n\n\n  /** Прилипание меню после прокрутки */\n  const firstMenu = document.querySelector('.navbar-first');\n  const secondMenu = document.querySelector('.navbar-second');\n  const secondMenuMb = +getComputedStyle(secondMenu).marginBottom.split('px').join('');\n  const scrollHeight = firstMenu.clientHeight;\n  const mb = secondMenu.clientHeight + secondMenuMb;\n\n  function transferNavbarSecond() {\n    window.pageYOffset > scrollHeight\n      ? secondMenu.classList.add('navbar-second_glue')\n      : secondMenu.classList.remove('navbar-second_glue');\n\n    window.pageYOffset > scrollHeight\n      ? firstMenu.style.marginBottom = `${mb}px`\n      : firstMenu.style.marginBottom = '0px';\n  }\n\n  transferNavbarSecond();\n  window.addEventListener('scroll', transferNavbarSecond);\n\n\n  /** Инициализация слайдеров swiper */\n  new Swiper('.swiper-main', {\n    slidesPerView: 'auto',\n    initialSlide: 0,\n    centeredSlides: true,\n    spaceBetween: 30,\n    loop: true,\n    autoplay: true,\n    delay: 4000,\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n    },\n    navigation: {\n      prevEl: '.swiper-main__prev',\n      nextEl: '.swiper-main__next'\n    },\n    slideToClickedSlide: true,\n    preloadImages: false,\n    lazy: true,\n    loadOnTransitionStart: true\n  });\n\n  new Swiper('.banner-stock', {\n    slidesPerView: 'auto',\n    initialSlide: 0,\n    centeredSlides: true,\n    spaceBetween: 30,\n    loop: true,\n    autoplay: true,\n    delay: 6000,\n    pagination: {\n      el: '.banner-stock__pagination',\n      clickable: true,\n    },\n    navigation: {\n      prevEl: '.banner-stock__prev',\n      nextEl: '.banner-stock__next'\n    },\n    slideToClickedSlide: true,\n    preloadImages: false,\n  });\n\n  new Swiper('.swiper-specialist', {\n    initialSlide: 0,\n    spaceBetween: 30,\n    centeredSlides: false,\n    allowTouchMove: false,\n    navigation: {\n      nextEl: '.specialists__next',\n      prevEl: '.specialists__prev',\n    },\n    breakpoints: {\n      480: {\n        spaceBetween: 10,\n        slidesPerView: 2\n      },\n      768: {\n        spaceBetween: 20,\n        slidesPerView: 3\n      },\n      992: {\n        slidesPerView: 4\n      },\n      1200: {\n        slidesPerView: 5\n      },\n      1500: {\n        slidesPerView: 6\n      }\n    }\n  });\n\n  new Swiper('.swiper-comments', {\n    initialSlide: 0,\n    centeredSlides: true,\n    loop: true,\n    autoplay: false,\n    navigation: {\n      nextEl: '.comments__next',\n      prevEl: '.comments__prev',\n    },\n  });\n\n  new Swiper('.swiper-comments-2', {\n    initialSlide: 0,\n    centeredSlides: true,\n    loop: true,\n    autoplay: false,\n    navigation: {\n      nextEl: '.comments__next',\n      prevEl: '.comments__prev',\n    },\n  });\n\n\n  /**\n   * После инициализации всех слайдеров с комментами скрываем их\n   * видны будут только те у которых есть класс .active\n   */\n  const commentsWrap = document.querySelectorAll('.comments__swiper');\n  commentsWrap.forEach(el => el.style.display = 'none');\n\n\n  /** Табы внутри блока отзывов */\n  const clinicWrap = document.querySelector('[data-wrap=\"clinic\"]');\n  const specialistWrap = document.querySelector('[data-wrap=\"specialist\"]');\n  const btnClinic = document.querySelector('[data-btn=\"clinic\"]');\n  const btnSpecialist = document.querySelector('[data-btn=\"specialist\"]');\n\n  function toggleFeedback() {\n    btnClinic.classList.toggle('active');\n    btnSpecialist.classList.toggle('active');\n    clinicWrap.classList.toggle('active');\n    specialistWrap.classList.toggle('active');\n  }\n\n  btnClinic && btnClinic.addEventListener('click', toggleFeedback);\n  btnSpecialist && btnSpecialist.addEventListener('click', toggleFeedback);\n\n\n  /**\n   * Ленивая загрузка видео\n   * событие скролла удаляется по достижению 50% прокрутки до видео\n   */\n  const videoWrap = document.querySelector('.video');\n\n  if (videoWrap) {\n    const video = videoWrap.querySelector('video');\n    const videoScrollTop = Math.ceil(video.getBoundingClientRect().top);\n\n    window.addEventListener('scroll', loadVideo);\n\n    function loadVideo() {\n      const scrollTop = window.pageYOffset;\n\n      if (scrollTop > videoScrollTop / 2) {\n        window.removeEventListener('scroll', loadVideo);\n\n        const source = video.querySelector('source');\n        const urlVideo = source.dataset.src;\n        source.setAttribute('src', urlVideo);\n        video.load();\n\n        /** Вешаем обработчик на воспроизведение/остановку видео */\n        videoWrap.addEventListener('click', async event => {\n\n          if (video.paused) {\n            await video.play();\n            videoWrap.style.background = 'url(../images/other/pattern.png) center repeat';\n            video.controls = true;\n          } else {\n            video.pause();\n            video.controls = false;\n          }\n\n          event.target.closest('.video').classList.toggle('play');\n        });\n      }\n    }\n  }\n\n\n  /** Календарь в модалке */\n  $('#datepicker').datepicker({\n    minDate: new Date(),\n    onSelect: function (dateText) {\n      $('#appointment-date').val(dateText);\n    }\n  });\n\n\n  /** Инициализация модалок */\n  const modalCallFeedback = new Modal({\n    idModal: 'modal-call-feedback',\n    selectorBtnOpen: '[data-btn=\"modal-call-feedback-btn\"]'\n  });\n\n  const modalDoctorCall = new Modal({\n    idModal: 'modal-doctor-call',\n    selectorBtnOpen: '[data-btn=\"modal-doctor-call-btn\"]'\n  });\n\n  const modalAppointment = new Modal({\n    idModal: 'modal-appointment',\n    selectorBtnOpen: '[data-btn=\"modal-appointment-btn\"]'\n  });\n\n  const modalFeedback = new Modal({\n    idModal: 'modal-feedback',\n    selectorBtnOpen: '[data-btn=\"modal-feedback-btn\"]'\n  });\n\n  const modalThanksFeedback = new Modal({\n    idModal: 'modal-thanks-feedback',\n    selectorBtnOpen: '[data-btn=\"modal-thanks-feedback-btn\"]'\n  });\n\n  const modalThanksAppointment = new Modal({\n    idModal: 'modal-thanks-appointment',\n    selectorBtnOpen: '[data-btn=\"modal-thanks-appointment-btn\"]'\n  });\n\n\n  /** Проверка согласия на обработку персональных данных */\n  function checkAgree() {\n    const btn = this.closest('form').querySelector('.button');\n    btn.toggleAttribute('disabled');\n  }\n  document.getElementById('call-feedback-checkbox').addEventListener('change', checkAgree);\n  document.getElementById('doctor-call-checkbox').addEventListener('change', checkAgree);\n  document.getElementById('appointment-checkbox').addEventListener('change', checkAgree);\n\n\n  /** Плавная прокрутка до якоря */\n  const anchors = document.querySelectorAll('a[href*=\"$\"]');\n  if (anchors.length) {\n    anchors.forEach(anchor => {\n      anchor.addEventListener('click', function (e) {\n        e.preventDefault();\n\n        const elementClick = this.getAttribute('href').split('');\n        elementClick.splice(0, 1, '#');\n        const normalName = elementClick.join('');\n        const destination = $(normalName).offset().top - 130;\n\n        $(\"html:not(:animated),body:not(:animated)\").animate({scrollTop: destination}, 1100);\n      })\n    });\n  }\n\n\n  /** Маска номера телефона на поля. Maskedinput */\n  $(\"#call-feedback-tel\").mask(\"+7 (999) 999-9999\");\n  $(\"#call-doctor-call-tel\").mask(\"+7 (999) 999-9999\");\n  $(\"#call-appointment-tel\").mask(\"+7 (999) 999-9999\");\n\n\n  /** Инициализация галереи fancybox */\n  document.querySelector('[data-fancybox=\"gallery\"]') && $('[data-fancybox=\"gallery\"]').fancybox({\n    toolbar: false,\n    transitionEffect: \"zoom-in-out\",\n    loop: true\n  });\n\n\n  /** Спойлеры услуг */\n  const spoilerWrap = document.querySelector('.amenities__spoilers');\n  if (spoilerWrap) {\n    const spoilers = document.querySelectorAll('.spoiler');\n    spoilers.forEach(spoiler => {\n      new Spoiler({\n        spoiler,\n        wrap: spoilerWrap\n      })\n    });\n  }\n});\n\n\n/** Управляем событиями */\nclass ManagementEvents {\n\n  /**\n   * На входе принимаем объект с параметрами\n   * arr   - массив куда сохраняем события\n   * el    - элемент, на который навешиваем обработчик\n   * event - событие (str)\n   * fn    - анонимная функция без вызова\n   * @param data\n   */\n  static addEventToArr(data) {\n    /** Добавляем событие в массив */\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\n\n    /** Вешаем слушатель */\n    data.el.addEventListener(data.event, data.fn);\n\n    return true\n  }\n\n  /**\n   * На входе принимаем массив событий\n   * @param arr\n   */\n  static removeEvents(arr) {\n    /** Снимаем обработчики события */\n    arr.forEach(item => {\n      item.el.removeEventListener(item.event, item.fn)\n    });\n\n    /** Очищаем массив */\n    arr.splice(0, arr.length);\n\n    return true;\n  }\n}\n\nclass Modal {\n  constructor(data) {\n    this.arrEvents = [];\n    this._modal = document.getElementById(data.idModal);\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\n\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\n\n    this.bind();\n  }\n\n  open() {\n    this._modal.classList.add('modal_open');\n    this._modalWindow.classList.add('modal__window_open');\n  }\n  close() {\n    this._modal.classList.remove('modal_open');\n    this._modalWindow.classList.remove('modal__window_open');\n  }\n\n  bind() {\n    /**\n     * Открытие модалки по клику на кнопку\n     */\n    this._btnsOpen.forEach(btn => {\n      ManagementEvents.addEventToArr({\n        arr: this.arrEvents,\n        el: btn,\n        event: 'click',\n        fn: () => this.open()\n      });\n    });\n\n\n    /**\n     * Закрытие модалки по клику вне нее\n     */\n    ManagementEvents.addEventToArr({\n      arr: this.arrEvents,\n      el: this._modal,\n      event: 'click',\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\n    });\n\n    /**\n     * Закрытие модалки по клику на крестик\n     */\n    ManagementEvents.addEventToArr({\n      arr: this.arrEvents,\n      el: this._btnClose,\n      event: 'click',\n      fn: () => this.close()\n    });\n  }\n\n  destroy() {\n    ManagementEvents.removeEvents(this.arrEvents);\n    this._modal.remove();\n  }\n}\n\nclass Spoiler {\n  constructor(data) {\n    this.spoiler = data.spoiler;\n    this.body = this.spoiler.querySelector('.spoiler__body');\n    this.wrap = data.wrap;\n    this.spoilers = null;\n    this.height = null;\n\n    this._initialize();\n  }\n\n  open() {\n    this.spoiler.classList.add('open');\n    this.body.style.height = `${this.height}px`;\n  }\n\n  close() {\n    this.spoiler.classList.remove('open');\n    this.body.style.height = '0px';\n  }\n\n  closeAll() {\n    this.spoilers.forEach(spoiler => {\n      spoiler.classList.remove('open');\n      spoiler.querySelector('.spoiler__body').style.height = '0px';\n    });\n  }\n\n  _initialize() {\n    this.height = this.body.clientHeight;\n    this.body.style.height = '0px';\n\n    /** если есть this.wrap, значит включен режим аккордеона */\n    if (this.wrap) this.spoilers = this.wrap.querySelectorAll('.spoiler');\n\n    this.spoiler.addEventListener('click', event => {\n      const spoiler = event.target.closest('.spoiler');\n      if (!spoiler) return;\n\n      /** открываем или закрываем спойлер */\n      const open = spoiler.classList.contains('open');\n      if (open) {\n        this.close();\n      } else {\n        this.wrap && this.closeAll();\n        this.open();\n      }\n    });\n  }\n}\n"]}