{"version":3,"sources":["script.js"],"names":["document","addEventListener","vh","window","innerHeight","documentElement","style","setProperty","concat","navigation","arrDropdownItem","header","querySelector","clientHeight","clientWidth","event","this","classList","toggle","screenWidth","itemOpen","target","closest","preventDefault","contains","forEach","item","remove","add","secondMenu","secondMenuMb","getComputedStyle","marginBottom","split","join","scrollHeight","firstMenu","mb","pageYOffset","transferNavbarSecond","Swiper","slidesPerView","initialSlide","centeredSlides","spaceBetween","loop","delay","pagination","el","clickable","prevEl","nextEl","slideToClickedSlide","preloadImages","lazy","loadOnTransitionStart","allowTouchMove","breakpoints","autoplay","querySelectorAll","display","btnSpecialist","specialistWrap","btnClinic","toggleFeedback","clinicWrap","videoScrollTop","videoWrap","removeEventListener","getBoundingClientRect","top","source","loadVideo","urlVideo","scrollTop","video","dataset","src","setAttribute","paused","load","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","play","background","pause","controls","stop","_x","apply","arguments","$","datepicker","minDate","Date","onSelect","dateText","val","Modal","idModal","selectorBtnOpen","Math","ceil","modalAppointment","checkAgree","toggleAttribute","getElementById","anchors","length","anchor","e","btn","elementClick","getAttribute","splice","normalName","offset","animate","destination","mask","toolbar","transitionEffect","spoilerWrap","spoiler","Spoiler","banner","height","data","arr","push","fn","_classCallCheck","_modal","_modalWindow","_btnsOpen","_btnClose","bind","_this","ManagementEvents","addEventToArr","arrEvents","open","close","removeEvents","spoilers","_initialize","body","_this2","closeAll"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  /**\r\n   * 100vh - высота без учета панелей инструментов на мобильных\r\n   */\r\n  const vh = window.innerHeight * 0.01;\r\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\r\n\r\n  const header = document.querySelector('.header').clientHeight;\r\n  document.documentElement.style.setProperty('--header', `${header}px`);\r\n\r\n\r\n  /**\r\n   * Если видно мобильное меню\r\n   */\r\n  const screenWidth = document.documentElement.clientWidth;\r\n  if (screenWidth < 1200) {\r\n\r\n    /**\r\n     * Открытие мобильного меню\r\n     */\r\n    const burger = document.querySelector('.burger');\r\n    burger.addEventListener('click', function (event) {\r\n      this.classList.toggle('open');\r\n      this\r\n        .closest('.navigation')\r\n        .querySelector('.navigation__content')\r\n        .classList.toggle('open');\r\n    });\r\n\r\n    /**\r\n     * Переключение открытой навигации\r\n     */\r\n    const navigation = document.querySelector('.navigation');\r\n    const arrDropdownItem = navigation.querySelectorAll('.navigation__item');\r\n\r\n    navigation.addEventListener('click', event => {\r\n      /**\r\n       * Если клик был не по пункту с дропдауном, то выходим\r\n       */\r\n        const target = event.target.closest('.navigation__item_drop');\r\n        if (!target) return;\r\n\r\n      /**\r\n       * Если клик был по ссылке внутри дропдауна, то выходим\r\n       */\r\n      const subItem = event.target.closest('.navigation__link');\r\n      if (!subItem) return;\r\n\r\n      event.preventDefault();\r\n\r\n      const itemOpen = target.classList.contains('open');\r\n\r\n      /**\r\n       * Закрываем все пункты\r\n       */\r\n      arrDropdownItem.forEach(item => item.closest('.open') && item.classList.remove('open'));\r\n\r\n      /**\r\n       * Открываем нужный\r\n       */\r\n      !itemOpen && target.classList.add('open');\r\n    })\r\n  }\r\n\r\n\r\n  /** Прилипание меню после прокрутки */\r\n  const firstMenu = document.querySelector('.navbar-first');\r\n  const secondMenu = document.querySelector('.navbar-second');\r\n  const secondMenuMb = +getComputedStyle(secondMenu).marginBottom.split('px').join('');\r\n  const scrollHeight = firstMenu.clientHeight;\r\n  const mb = secondMenu.clientHeight + secondMenuMb;\r\n\r\n  function transferNavbarSecond() {\r\n    window.pageYOffset > scrollHeight\r\n      ? secondMenu.classList.add('navbar-second_glue')\r\n      : secondMenu.classList.remove('navbar-second_glue');\r\n\r\n    window.pageYOffset > scrollHeight\r\n      ? firstMenu.style.marginBottom = `${mb}px`\r\n      : firstMenu.style.marginBottom = '0px';\r\n  }\r\n\r\n  transferNavbarSecond();\r\n  window.addEventListener('scroll', transferNavbarSecond);\r\n\r\n\r\n  /** Инициализация слайдеров swiper */\r\n  const swiperMain = new Swiper('.swiper-main', {\r\n    slidesPerView: 'auto',\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    spaceBetween: 30,\r\n    loop: true,\r\n    // autoplay: true,\r\n    delay: 5000,\r\n    pagination: {\r\n      el: '.swiper-pagination',\r\n      clickable: true,\r\n    },\r\n    navigation: {\r\n      prevEl: '.swiper-main__prev',\r\n      nextEl: '.swiper-main__next'\r\n    },\r\n    slideToClickedSlide: true,\r\n    preloadImages: false,\r\n    lazy: true,\r\n    loadOnTransitionStart: true\r\n  });\r\n\r\n  const swiperSpecialist = new Swiper('.swiper-specialist', {\r\n    initialSlide: 0,\r\n    spaceBetween: 30,\r\n    centeredSlides: false,\r\n    allowTouchMove: false,\r\n    navigation: {\r\n      nextEl: '.specialists__next',\r\n      prevEl: '.specialists__prev',\r\n    },\r\n    breakpoints: {\r\n      480: {\r\n        spaceBetween: 10,\r\n        slidesPerView: 2\r\n      },\r\n      768: {\r\n        spaceBetween: 20,\r\n        slidesPerView: 3\r\n      },\r\n      992: {\r\n        slidesPerView: 4\r\n      },\r\n      1200: {\r\n        slidesPerView: 5\r\n      },\r\n      1500: {\r\n        slidesPerView: 6\r\n      }\r\n    }\r\n  });\r\n\r\n  const swipersComments = new Swiper('.swiper-comments', {\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    loop: true,\r\n    autoplay: false,\r\n    navigation: {\r\n      nextEl: '.comments__next',\r\n      prevEl: '.comments__prev',\r\n    },\r\n  });\r\n\r\n  const swipersComments2 = new Swiper('.swiper-comments-2', {\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    loop: true,\r\n    autoplay: false,\r\n    navigation: {\r\n      nextEl: '.comments__next',\r\n      prevEl: '.comments__prev',\r\n    },\r\n  });\r\n\r\n\r\n  /**\r\n   * После инициализации всех слайдеров с комментами скрываем их\r\n   * видны будут только те у которых есть класс .active\r\n   */\r\n  const commentsWrap = document.querySelectorAll('.comments__swiper');\r\n  commentsWrap.forEach(el => el.style.display = 'none');\r\n\r\n\r\n  /** Табы внутри блока отзывов */\r\n  const clinicWrap = document.querySelector('[data-wrap=\"clinic\"]');\r\n  const specialistWrap = document.querySelector('[data-wrap=\"specialist\"]');\r\n  const btnClinic = document.querySelector('[data-btn=\"clinic\"]');\r\n  const btnSpecialist = document.querySelector('[data-btn=\"specialist\"]');\r\n\r\n  function toggleFeedback() {\r\n    btnClinic.classList.toggle('active');\r\n    btnSpecialist.classList.toggle('active');\r\n    clinicWrap.classList.toggle('active');\r\n    specialistWrap.classList.toggle('active');\r\n  }\r\n\r\n  btnClinic && btnClinic.addEventListener('click', toggleFeedback);\r\n  btnSpecialist && btnSpecialist.addEventListener('click', toggleFeedback);\r\n\r\n\r\n  /**\r\n   * Ленивая загрузка видео\r\n   * событие скролла удаляется по достижению 50% прокрутки до видео\r\n   */\r\n  const videoWrap = document.querySelector('.video');\r\n\r\n  if (videoWrap) {\r\n    const video = videoWrap.querySelector('video');\r\n    const videoScrollTop = Math.ceil(video.getBoundingClientRect().top);\r\n\r\n    window.addEventListener('scroll', loadVideo);\r\n\r\n    function loadVideo() {\r\n      const scrollTop = window.pageYOffset;\r\n\r\n      if (scrollTop > videoScrollTop / 2) {\r\n        window.removeEventListener('scroll', loadVideo);\r\n\r\n        const source = video.querySelector('source');\r\n        const urlVideo = source.dataset.src;\r\n        source.setAttribute('src', urlVideo);\r\n        video.load();\r\n\r\n        /** Вешаем обработчик на воспроизведение/остановку видео */\r\n        videoWrap.addEventListener('click', async event => {\r\n\r\n          if (video.paused) {\r\n            await video.play();\r\n            videoWrap.style.background = 'url(../images/other/pattern.png) center repeat';\r\n            video.controls = true;\r\n          } else {\r\n            video.pause();\r\n            video.controls = false;\r\n          }\r\n\r\n          event.target.closest('.video').classList.toggle('play');\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /** Календарь в модалке */\r\n  $('#datepicker').datepicker({\r\n    minDate: new Date(),\r\n    onSelect: function (dateText) {\r\n      $('#appointment-date').val(dateText);\r\n    }\r\n  });\r\n\r\n\r\n  /** Инициализация модалок */\r\n  const modalCallFeedback = new Modal({\r\n    idModal: 'modal-call-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-call-feedback-btn\"]'\r\n  });\r\n\r\n  const modalDoctorCall = new Modal({\r\n    idModal: 'modal-doctor-call',\r\n    selectorBtnOpen: '[data-btn=\"modal-doctor-call-btn\"]'\r\n  });\r\n\r\n  const modalAppointment = new Modal({\r\n    idModal: 'modal-appointment',\r\n    selectorBtnOpen: '[data-btn=\"modal-appointment-btn\"]'\r\n  });\r\n\r\n  const modalFeedback = new Modal({\r\n    idModal: 'modal-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-feedback-btn\"]'\r\n  });\r\n\r\n  const modalThanksFeedback = new Modal({\r\n    idModal: 'modal-thanks-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-thanks-feedback-btn\"]'\r\n  });\r\n\r\n  const modalThanksAppointment = new Modal({\r\n    idModal: 'modal-thanks-appointment',\r\n    selectorBtnOpen: '[data-btn=\"modal-thanks-appointment-btn\"]'\r\n  });\r\n\r\n\r\n  /** Проверка согласия на обработку персональных данных */\r\n  function checkAgree() {\r\n    const btn = this.closest('form').querySelector('.button');\r\n    btn.toggleAttribute('disabled');\r\n  }\r\n  document.getElementById('call-feedback-checkbox').addEventListener('change', checkAgree);\r\n  document.getElementById('doctor-call-checkbox').addEventListener('change', checkAgree);\r\n  document.getElementById('appointment-checkbox').addEventListener('change', checkAgree);\r\n\r\n\r\n  /** Плавная прокрутка до якоря */\r\n  const anchors = document.querySelectorAll('a[href*=\"$\"]');\r\n  if (anchors.length) {\r\n    anchors.forEach(anchor => {\r\n      anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        const elementClick = this.getAttribute('href').split('');\r\n        elementClick.splice(0, 1, '#');\r\n        const normalName = elementClick.join('');\r\n        const destination = $(normalName).offset().top - 130;\r\n\r\n        $(\"html:not(:animated),body:not(:animated)\").animate({scrollTop: destination}, 1100);\r\n      })\r\n    });\r\n  }\r\n\r\n\r\n  /** Маска номера телефона на поля. Maskedinput */\r\n  $(\"#call-feedback-tel\").mask(\"+7 (999) 999-9999\");\r\n  $(\"#call-doctor-call-tel\").mask(\"+7 (999) 999-9999\");\r\n  $(\"#call-appointment-tel\").mask(\"+7 (999) 999-9999\");\r\n\r\n\r\n  /** Инициализация галереи fancybox */\r\n  document.querySelector('[data-fancybox=\"gallery\"]') && $('[data-fancybox=\"gallery\"]').fancybox({\r\n    toolbar: false,\r\n    transitionEffect: \"zoom-in-out\",\r\n    loop: true\r\n  });\r\n\r\n\r\n  /** Спойлеры услуг */\r\n  const spoilerWrap = document.querySelector('.amenities__spoilers');\r\n  if (spoilerWrap) {\r\n    const spoilers = document.querySelectorAll('.spoiler');\r\n    spoilers.forEach(spoiler => {\r\n      new Spoiler({\r\n        spoiler,\r\n        wrap: spoilerWrap\r\n      })\r\n    });\r\n  }\r\n\r\n\r\n  /** Соотношение сторон баннера акций */\r\n  const bannersStock = document.querySelectorAll('.banner-stock');\r\n  bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 6}px`);\r\n});\r\n\r\n\r\n/** Управляем событиями */\r\nclass ManagementEvents {\r\n\r\n  /**\r\n   * На входе принимаем объект с параметрами\r\n   * arr   - массив куда сохраняем события\r\n   * el    - элемент, на который навешиваем обработчик\r\n   * event - событие (str)\r\n   * fn    - анонимная функция без вызова\r\n   * @param data\r\n   */\r\n  static addEventToArr(data) {\r\n    /** Добавляем событие в массив */\r\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\r\n\r\n    /** Вешаем слушатель */\r\n    data.el.addEventListener(data.event, data.fn);\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * На входе принимаем массив событий\r\n   * @param arr\r\n   */\r\n  static removeEvents(arr) {\r\n    /** Снимаем обработчики события */\r\n    arr.forEach(item => {\r\n      item.el.removeEventListener(item.event, item.fn)\r\n    });\r\n\r\n    /** Очищаем массив */\r\n    arr.splice(0, arr.length);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nclass Modal {\r\n  constructor(data) {\r\n    this.arrEvents = [];\r\n    this._modal = document.getElementById(data.idModal);\r\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\r\n\r\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\r\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\r\n\r\n    this.bind();\r\n  }\r\n\r\n  open() {\r\n    this._modal.classList.add('modal_open');\r\n    this._modalWindow.classList.add('modal__window_open');\r\n  }\r\n  close() {\r\n    this._modal.classList.remove('modal_open');\r\n    this._modalWindow.classList.remove('modal__window_open');\r\n  }\r\n\r\n  bind() {\r\n    /**\r\n     * Открытие модалки по клику на кнопку\r\n     */\r\n    this._btnsOpen.forEach(btn => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btn,\r\n        event: 'click',\r\n        fn: () => this.open()\r\n      });\r\n    });\r\n\r\n\r\n    /**\r\n     * Закрытие модалки по клику вне нее\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._modal,\r\n      event: 'click',\r\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\r\n    });\r\n\r\n    /**\r\n     * Закрытие модалки по клику на крестик\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._btnClose,\r\n      event: 'click',\r\n      fn: () => this.close()\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    ManagementEvents.removeEvents(this.arrEvents);\r\n    this._modal.remove();\r\n  }\r\n}\r\n\r\nclass Spoiler {\r\n  constructor(data) {\r\n    this.spoiler = data.spoiler;\r\n    this.body = this.spoiler.querySelector('.spoiler__body');\r\n    this.wrap = data.wrap;\r\n    this.spoilers = null;\r\n    this.height = null;\r\n\r\n    this._initialize();\r\n  }\r\n\r\n  open() {\r\n    this.spoiler.classList.add('open');\r\n    this.body.style.height = `${this.height}px`;\r\n  }\r\n\r\n  close() {\r\n    this.spoiler.classList.remove('open');\r\n    this.body.style.height = '0px';\r\n  }\r\n\r\n  closeAll() {\r\n    this.spoilers.forEach(spoiler => {\r\n      spoiler.classList.remove('open');\r\n      spoiler.querySelector('.spoiler__body').style.height = '0px';\r\n    });\r\n  }\r\n\r\n  _initialize() {\r\n    this.height = this.body.clientHeight;\r\n    this.body.style.height = '0px';\r\n\r\n    /** если есть this.wrap, значит включен режим аккордеона */\r\n    if (this.wrap) this.spoilers = this.wrap.querySelectorAll('.spoiler');\r\n\r\n    this.spoiler.addEventListener('click', event => {\r\n      const spoiler = event.target.closest('.spoiler');\r\n      if (!spoiler) return;\r\n\r\n      /** открываем или закрываем спойлер */\r\n      const open = spoiler.classList.contains('open');\r\n      if (open) {\r\n        this.close();\r\n      } else {\r\n        this.wrap && this.closeAll();\r\n        this.open();\r\n      }\r\n    });\r\n  }\r\n}"]}