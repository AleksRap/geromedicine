{"version":3,"sources":["script.js"],"names":["document","addEventListener","screenWidth","documentElement","clientWidth","vh","window","innerHeight","style","setProperty","concat","header","querySelector","clientHeight","coversArticles","querySelectorAll","length","forEach","cover","height","coversCardsArt","navigation","arrDropdownItem","bannersStock","banner","event","this","closest","classList","toggle","burger","target","preventDefault","contains","item","remove","itemOpen","add","firstMenu","secondMenu","secondMenuMb","getComputedStyle","marginBottom","split","join","scrollHeight","transferNavbarSecond","pageYOffset","Swiper","initialSlide","centeredSlides","spaceBetween","slidesPerView","loop","autoplay","pagination","el","clickable","prevEl","nextEl","loadOnTransitionStart","swiperSpecialist","allowTouchMove","breakpoints","1200","1500","swipersComments","swipersComments2","display","clinicWrap","specialistWrap","btnClinic","toggleFeedback","btnSpecialist","loadVideo","scrollTop","videoWrap","getBoundingClientRect","top","videoScrollTop","source","urlVideo","dataset","video","removeEventListener","src","setAttribute","load","paused","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","play","background","controls","pause","stop","_x","apply","arguments","minDate","Date","onSelect","dateText","$","val","Modal","idModal","selectorBtnOpen","datepicker","checkAgree","toggleAttribute","getElementById","anchors","modalThanksAppointment","anchor","e","elementClick","getAttribute","splice","btn","normalName","offset","animate","destination","mask","fancybox","toolbar","transitionEffect","spoilerWrap","spoiler","Spoiler","ManagementEvents","data","arr","push","fn","_classCallCheck","arrEvents","_modal","_btnsOpen","_btnClose","bind","_modalWindow","_this","addEventToArr","open","close","removeEvents","_initialize","body","spoilers","_this2","closeAll"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  const screenWidth = document.documentElement.clientWidth;\r\n\r\n  /**\r\n   * 100vh - высота без учета панелей инструментов на мобильных\r\n   */\r\n  const vh = window.innerHeight * 0.01;\r\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\r\n\r\n  const header = document.querySelector('.header').clientHeight;\r\n  document.documentElement.style.setProperty('--header', `${header}px`);\r\n\r\n\r\n  /**\r\n   * Обложки статей в соотношении 3.6\r\n   */\r\n  const coversArticles = document.querySelectorAll('.article__pic');\r\n  if (coversArticles.length) coversArticles.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\r\n\r\n  /**\r\n   * Обложки статей в соотношении 3.6\r\n   */\r\n  const coversCardsArt = document.querySelectorAll('.article-card__img');\r\n  if (coversCardsArt.length) coversCardsArt.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\r\n\r\n  /**\r\n   * Соотношение сторон баннера акций 6:1 (ПК), 330:200 (мобилки, ниже 480px)\r\n   */\r\n  const bannersStock = document.querySelectorAll('.banner-stock');\r\n  screenWidth <= 480\r\n    ? bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 1.65}px`)\r\n    : bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 6}px`);\r\n\r\n\r\n  /**\r\n   * Если видно мобильное меню\r\n   */\r\n  if (screenWidth < 1200) {\r\n\r\n    /**\r\n     * Открытие мобильного меню\r\n     */\r\n    const burger = document.querySelector('.burger');\r\n    burger.addEventListener('click', function (event) {\r\n      this.classList.toggle('open');\r\n      this\r\n        .closest('.navigation')\r\n        .querySelector('.navigation__content')\r\n        .classList.toggle('open');\r\n    });\r\n\r\n    /**\r\n     * Переключение открытой навигации\r\n     */\r\n    const navigation = document.querySelector('.navigation');\r\n    const arrDropdownItem = navigation.querySelectorAll('.navigation__item');\r\n\r\n    navigation.addEventListener('click', event => {\r\n      /**\r\n       * Если клик был не по пункту с дропдауном, то выходим\r\n       */\r\n        const target = event.target.closest('.navigation__item_drop');\r\n        if (!target) return;\r\n\r\n      /**\r\n       * Если клик был по ссылке внутри дропдауна, то выходим\r\n       */\r\n      const subItem = event.target.closest('.navigation__link');\r\n      if (!subItem) return;\r\n\r\n      event.preventDefault();\r\n\r\n      const itemOpen = target.classList.contains('open');\r\n\r\n      /**\r\n       * Закрываем все пункты\r\n       */\r\n      arrDropdownItem.forEach(item => item.closest('.open') && item.classList.remove('open'));\r\n\r\n      /**\r\n       * Открываем нужный\r\n       */\r\n      !itemOpen && target.classList.add('open');\r\n    })\r\n  }\r\n\r\n\r\n  /** Прилипание меню после прокрутки */\r\n  const firstMenu = document.querySelector('.navbar-first');\r\n  const secondMenu = document.querySelector('.navbar-second');\r\n  const secondMenuMb = +getComputedStyle(secondMenu).marginBottom.split('px').join('');\r\n  const scrollHeight = firstMenu.clientHeight;\r\n  const mb = secondMenu.clientHeight + secondMenuMb;\r\n\r\n  function transferNavbarSecond() {\r\n    window.pageYOffset > scrollHeight\r\n      ? secondMenu.classList.add('navbar-second_glue')\r\n      : secondMenu.classList.remove('navbar-second_glue');\r\n\r\n    window.pageYOffset > scrollHeight\r\n      ? firstMenu.style.marginBottom = `${mb}px`\r\n      : firstMenu.style.marginBottom = '0px';\r\n  }\r\n\r\n  transferNavbarSecond();\r\n  window.addEventListener('scroll', transferNavbarSecond);\r\n\r\n\r\n  /** Инициализация слайдеров swiper */\r\n  const swiperMain = new Swiper('.swiper-main', {\r\n    slidesPerView: 'auto',\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    spaceBetween: 30,\r\n    loop: true,\r\n    autoplay: true,\r\n    delay: 4000,\r\n    pagination: {\r\n      el: '.swiper-pagination',\r\n      clickable: true,\r\n    },\r\n    navigation: {\r\n      prevEl: '.swiper-main__prev',\r\n      nextEl: '.swiper-main__next'\r\n    },\r\n    slideToClickedSlide: true,\r\n    preloadImages: false,\r\n    lazy: true,\r\n    loadOnTransitionStart: true\r\n  });\r\n\r\n  const swiperSpecialist = new Swiper('.swiper-specialist', {\r\n    initialSlide: 0,\r\n    spaceBetween: 30,\r\n    centeredSlides: false,\r\n    allowTouchMove: false,\r\n    navigation: {\r\n      nextEl: '.specialists__next',\r\n      prevEl: '.specialists__prev',\r\n    },\r\n    breakpoints: {\r\n      480: {\r\n        spaceBetween: 10,\r\n        slidesPerView: 2\r\n      },\r\n      768: {\r\n        spaceBetween: 20,\r\n        slidesPerView: 3\r\n      },\r\n      992: {\r\n        slidesPerView: 4\r\n      },\r\n      1200: {\r\n        slidesPerView: 5\r\n      },\r\n      1500: {\r\n        slidesPerView: 6\r\n      }\r\n    }\r\n  });\r\n\r\n  const swipersComments = new Swiper('.swiper-comments', {\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    loop: true,\r\n    autoplay: false,\r\n    navigation: {\r\n      nextEl: '.comments__next',\r\n      prevEl: '.comments__prev',\r\n    },\r\n  });\r\n\r\n  const swipersComments2 = new Swiper('.swiper-comments-2', {\r\n    initialSlide: 0,\r\n    centeredSlides: true,\r\n    loop: true,\r\n    autoplay: false,\r\n    navigation: {\r\n      nextEl: '.comments__next',\r\n      prevEl: '.comments__prev',\r\n    },\r\n  });\r\n\r\n\r\n  /**\r\n   * После инициализации всех слайдеров с комментами скрываем их\r\n   * видны будут только те у которых есть класс .active\r\n   */\r\n  const commentsWrap = document.querySelectorAll('.comments__swiper');\r\n  commentsWrap.forEach(el => el.style.display = 'none');\r\n\r\n\r\n  /** Табы внутри блока отзывов */\r\n  const clinicWrap = document.querySelector('[data-wrap=\"clinic\"]');\r\n  const specialistWrap = document.querySelector('[data-wrap=\"specialist\"]');\r\n  const btnClinic = document.querySelector('[data-btn=\"clinic\"]');\r\n  const btnSpecialist = document.querySelector('[data-btn=\"specialist\"]');\r\n\r\n  function toggleFeedback() {\r\n    btnClinic.classList.toggle('active');\r\n    btnSpecialist.classList.toggle('active');\r\n    clinicWrap.classList.toggle('active');\r\n    specialistWrap.classList.toggle('active');\r\n  }\r\n\r\n  btnClinic && btnClinic.addEventListener('click', toggleFeedback);\r\n  btnSpecialist && btnSpecialist.addEventListener('click', toggleFeedback);\r\n\r\n\r\n  /**\r\n   * Ленивая загрузка видео\r\n   * событие скролла удаляется по достижению 50% прокрутки до видео\r\n   */\r\n  const videoWrap = document.querySelector('.video');\r\n\r\n  if (videoWrap) {\r\n    const video = videoWrap.querySelector('video');\r\n    const videoScrollTop = Math.ceil(video.getBoundingClientRect().top);\r\n\r\n    window.addEventListener('scroll', loadVideo);\r\n\r\n    function loadVideo() {\r\n      const scrollTop = window.pageYOffset;\r\n\r\n      if (scrollTop > videoScrollTop / 2) {\r\n        window.removeEventListener('scroll', loadVideo);\r\n\r\n        const source = video.querySelector('source');\r\n        const urlVideo = source.dataset.src;\r\n        source.setAttribute('src', urlVideo);\r\n        video.load();\r\n\r\n        /** Вешаем обработчик на воспроизведение/остановку видео */\r\n        videoWrap.addEventListener('click', async event => {\r\n\r\n          if (video.paused) {\r\n            await video.play();\r\n            videoWrap.style.background = 'url(../images/other/pattern.png) center repeat';\r\n            video.controls = true;\r\n          } else {\r\n            video.pause();\r\n            video.controls = false;\r\n          }\r\n\r\n          event.target.closest('.video').classList.toggle('play');\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /** Календарь в модалке */\r\n  $('#datepicker').datepicker({\r\n    minDate: new Date(),\r\n    onSelect: function (dateText) {\r\n      $('#appointment-date').val(dateText);\r\n    }\r\n  });\r\n\r\n\r\n  /** Инициализация модалок */\r\n  const modalCallFeedback = new Modal({\r\n    idModal: 'modal-call-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-call-feedback-btn\"]'\r\n  });\r\n\r\n  const modalDoctorCall = new Modal({\r\n    idModal: 'modal-doctor-call',\r\n    selectorBtnOpen: '[data-btn=\"modal-doctor-call-btn\"]'\r\n  });\r\n\r\n  const modalAppointment = new Modal({\r\n    idModal: 'modal-appointment',\r\n    selectorBtnOpen: '[data-btn=\"modal-appointment-btn\"]'\r\n  });\r\n\r\n  const modalFeedback = new Modal({\r\n    idModal: 'modal-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-feedback-btn\"]'\r\n  });\r\n\r\n  const modalThanksFeedback = new Modal({\r\n    idModal: 'modal-thanks-feedback',\r\n    selectorBtnOpen: '[data-btn=\"modal-thanks-feedback-btn\"]'\r\n  });\r\n\r\n  const modalThanksAppointment = new Modal({\r\n    idModal: 'modal-thanks-appointment',\r\n    selectorBtnOpen: '[data-btn=\"modal-thanks-appointment-btn\"]'\r\n  });\r\n\r\n\r\n  /** Проверка согласия на обработку персональных данных */\r\n  function checkAgree() {\r\n    const btn = this.closest('form').querySelector('.button');\r\n    btn.toggleAttribute('disabled');\r\n  }\r\n  document.getElementById('call-feedback-checkbox').addEventListener('change', checkAgree);\r\n  document.getElementById('doctor-call-checkbox').addEventListener('change', checkAgree);\r\n  document.getElementById('appointment-checkbox').addEventListener('change', checkAgree);\r\n\r\n\r\n  /** Плавная прокрутка до якоря */\r\n  const anchors = document.querySelectorAll('a[href*=\"$\"]');\r\n  if (anchors.length) {\r\n    anchors.forEach(anchor => {\r\n      anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        const elementClick = this.getAttribute('href').split('');\r\n        elementClick.splice(0, 1, '#');\r\n        const normalName = elementClick.join('');\r\n        const destination = $(normalName).offset().top - 130;\r\n\r\n        $(\"html:not(:animated),body:not(:animated)\").animate({scrollTop: destination}, 1100);\r\n      })\r\n    });\r\n  }\r\n\r\n\r\n  /** Маска номера телефона на поля. Maskedinput */\r\n  $(\"#call-feedback-tel\").mask(\"+7 (999) 999-9999\");\r\n  $(\"#call-doctor-call-tel\").mask(\"+7 (999) 999-9999\");\r\n  $(\"#call-appointment-tel\").mask(\"+7 (999) 999-9999\");\r\n\r\n\r\n  /** Инициализация галереи fancybox */\r\n  document.querySelector('[data-fancybox=\"gallery\"]') && $('[data-fancybox=\"gallery\"]').fancybox({\r\n    toolbar: false,\r\n    transitionEffect: \"zoom-in-out\",\r\n    loop: true\r\n  });\r\n\r\n\r\n  /** Спойлеры услуг */\r\n  const spoilerWrap = document.querySelector('.amenities__spoilers');\r\n  if (spoilerWrap) {\r\n    const spoilers = document.querySelectorAll('.spoiler');\r\n    spoilers.forEach(spoiler => {\r\n      new Spoiler({\r\n        spoiler,\r\n        wrap: spoilerWrap\r\n      })\r\n    });\r\n  }\r\n});\r\n\r\n\r\n/** Управляем событиями */\r\nclass ManagementEvents {\r\n\r\n  /**\r\n   * На входе принимаем объект с параметрами\r\n   * arr   - массив куда сохраняем события\r\n   * el    - элемент, на который навешиваем обработчик\r\n   * event - событие (str)\r\n   * fn    - анонимная функция без вызова\r\n   * @param data\r\n   */\r\n  static addEventToArr(data) {\r\n    /** Добавляем событие в массив */\r\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\r\n\r\n    /** Вешаем слушатель */\r\n    data.el.addEventListener(data.event, data.fn);\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * На входе принимаем массив событий\r\n   * @param arr\r\n   */\r\n  static removeEvents(arr) {\r\n    /** Снимаем обработчики события */\r\n    arr.forEach(item => {\r\n      item.el.removeEventListener(item.event, item.fn)\r\n    });\r\n\r\n    /** Очищаем массив */\r\n    arr.splice(0, arr.length);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nclass Modal {\r\n  constructor(data) {\r\n    this.arrEvents = [];\r\n    this._modal = document.getElementById(data.idModal);\r\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\r\n\r\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\r\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\r\n\r\n    this.bind();\r\n  }\r\n\r\n  open() {\r\n    this._modal.classList.add('modal_open');\r\n    this._modalWindow.classList.add('modal__window_open');\r\n  }\r\n  close() {\r\n    this._modal.classList.remove('modal_open');\r\n    this._modalWindow.classList.remove('modal__window_open');\r\n  }\r\n\r\n  bind() {\r\n    /**\r\n     * Открытие модалки по клику на кнопку\r\n     */\r\n    this._btnsOpen.forEach(btn => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btn,\r\n        event: 'click',\r\n        fn: () => this.open()\r\n      });\r\n    });\r\n\r\n\r\n    /**\r\n     * Закрытие модалки по клику вне нее\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._modal,\r\n      event: 'click',\r\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\r\n    });\r\n\r\n    /**\r\n     * Закрытие модалки по клику на крестик\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._btnClose,\r\n      event: 'click',\r\n      fn: () => this.close()\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    ManagementEvents.removeEvents(this.arrEvents);\r\n    this._modal.remove();\r\n  }\r\n}\r\n\r\nclass Spoiler {\r\n  constructor(data) {\r\n    this.spoiler = data.spoiler;\r\n    this.body = this.spoiler.querySelector('.spoiler__body');\r\n    this.wrap = data.wrap;\r\n    this.spoilers = null;\r\n    this.height = null;\r\n\r\n    this._initialize();\r\n  }\r\n\r\n  open() {\r\n    this.spoiler.classList.add('open');\r\n    this.body.style.height = `${this.height}px`;\r\n  }\r\n\r\n  close() {\r\n    this.spoiler.classList.remove('open');\r\n    this.body.style.height = '0px';\r\n  }\r\n\r\n  closeAll() {\r\n    this.spoilers.forEach(spoiler => {\r\n      spoiler.classList.remove('open');\r\n      spoiler.querySelector('.spoiler__body').style.height = '0px';\r\n    });\r\n  }\r\n\r\n  _initialize() {\r\n    this.height = this.body.clientHeight;\r\n    this.body.style.height = '0px';\r\n\r\n    /** если есть this.wrap, значит включен режим аккордеона */\r\n    if (this.wrap) this.spoilers = this.wrap.querySelectorAll('.spoiler');\r\n\r\n    this.spoiler.addEventListener('click', event => {\r\n      const spoiler = event.target.closest('.spoiler');\r\n      if (!spoiler) return;\r\n\r\n      /** открываем или закрываем спойлер */\r\n      const open = spoiler.classList.contains('open');\r\n      if (open) {\r\n        this.close();\r\n      } else {\r\n        this.wrap && this.closeAll();\r\n        this.open();\r\n      }\r\n    });\r\n  }\r\n}"]}