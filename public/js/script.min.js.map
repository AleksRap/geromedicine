{"version":3,"sources":["script.js"],"names":["document","addEventListener","screenWidth","documentElement","clientWidth","vh","window","innerHeight","style","setProperty","concat","header","querySelector","clientHeight","coversArticles","querySelectorAll","length","forEach","cover","height","coversCardsArt","navigation","arrDropdownItem","bannersStock","banner","event","this","closest","classList","toggle","burger","target","preventDefault","contains","item","remove","itemOpen","add","firstMenu","secondMenu","secondMenuMb","getComputedStyle","marginBottom","split","join","scrollHeight","transferNavbarSecond","pageYOffset","Swiper","initialSlide","centeredSlides","spaceBetween","slidesPerView","loop","autoplay","pagination","el","clickable","prevEl","nextEl","loadOnTransitionStart","swiperSpecialist","allowTouchMove","breakpoints","1200","1500","swipersComments","swipersComments2","display","clinicWrap","specialistWrap","btnClinic","toggleFeedback","btnSpecialist","loadVideo","scrollTop","videoWrap","getBoundingClientRect","top","videoScrollTop","source","urlVideo","dataset","video","removeEventListener","src","setAttribute","load","paused","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","play","background","controls","pause","stop","_x","apply","arguments","minDate","Date","onSelect","dateText","$","val","Modal","idModal","selectorBtnOpen","datepicker","checkAgree","toggleAttribute","getElementById","anchors","modalThanksAppointment","anchor","e","elementClick","getAttribute","splice","btn","normalName","offset","animate","destination","mask","fancybox","toolbar","transitionEffect","spoilerWrap","spoiler","Spoiler","ManagementEvents","data","arr","push","fn","_classCallCheck","arrEvents","_modal","_btnsOpen","_btnClose","bind","_modalWindow","_this","addEventToArr","open","close","removeEvents","_initialize","body","spoilers","_this2","closeAll"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const screenWidth = document.documentElement.clientWidth;\n\n  /**\n   * 100vh - высота без учета панелей инструментов на мобильных\n   */\n  const vh = window.innerHeight * 0.01;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n  const header = document.querySelector('.header').clientHeight;\n  document.documentElement.style.setProperty('--header', `${header}px`);\n\n\n  /**\n   * Обложки статей в соотношении 3.6\n   */\n  const coversArticles = document.querySelectorAll('.article__pic');\n  if (coversArticles.length) coversArticles.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\n\n  /**\n   * Обложки статей в соотношении 3.6\n   */\n  const coversCardsArt = document.querySelectorAll('.article-card__img');\n  if (coversCardsArt.length) coversCardsArt.forEach(cover => cover.style.height = `${cover.clientWidth / 3.6}px`);\n\n  /**\n   * Соотношение сторон баннера акций 6:1 (ПК), 330:200 (мобилки, ниже 480px)\n   */\n  const bannersStock = document.querySelectorAll('.banner-stock');\n  screenWidth <= 480\n    ? bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 1.65}px`)\n    : bannersStock.forEach(banner => banner.style.height = `${banner.clientWidth / 6}px`);\n\n\n  /**\n   * Если видно мобильное меню\n   */\n  if (screenWidth < 1200) {\n\n    /**\n     * Открытие мобильного меню\n     */\n    const burger = document.querySelector('.burger');\n    burger.addEventListener('click', function (event) {\n      this.classList.toggle('open');\n      this\n        .closest('.navigation')\n        .querySelector('.navigation__content')\n        .classList.toggle('open');\n    });\n\n    /**\n     * Переключение открытой навигации\n     */\n    const navigation = document.querySelector('.navigation');\n    const arrDropdownItem = navigation.querySelectorAll('.navigation__item');\n\n    navigation.addEventListener('click', event => {\n      /**\n       * Если клик был не по пункту с дропдауном, то выходим\n       */\n        const target = event.target.closest('.navigation__item_drop');\n        if (!target) return;\n\n      /**\n       * Если клик был по ссылке внутри дропдауна, то выходим\n       */\n      const subItem = event.target.closest('.navigation__link');\n      if (!subItem) return;\n\n      event.preventDefault();\n\n      const itemOpen = target.classList.contains('open');\n\n      /**\n       * Закрываем все пункты\n       */\n      arrDropdownItem.forEach(item => item.closest('.open') && item.classList.remove('open'));\n\n      /**\n       * Открываем нужный\n       */\n      !itemOpen && target.classList.add('open');\n    })\n  }\n\n\n  /** Прилипание меню после прокрутки */\n  const firstMenu = document.querySelector('.navbar-first');\n  const secondMenu = document.querySelector('.navbar-second');\n  const secondMenuMb = +getComputedStyle(secondMenu).marginBottom.split('px').join('');\n  const scrollHeight = firstMenu.clientHeight;\n  const mb = secondMenu.clientHeight + secondMenuMb;\n\n  function transferNavbarSecond() {\n    window.pageYOffset > scrollHeight\n      ? secondMenu.classList.add('navbar-second_glue')\n      : secondMenu.classList.remove('navbar-second_glue');\n\n    window.pageYOffset > scrollHeight\n      ? firstMenu.style.marginBottom = `${mb}px`\n      : firstMenu.style.marginBottom = '0px';\n  }\n\n  transferNavbarSecond();\n  window.addEventListener('scroll', transferNavbarSecond);\n\n\n  /** Инициализация слайдеров swiper */\n  const swiperMain = new Swiper('.swiper-main', {\n    slidesPerView: 'auto',\n    initialSlide: 0,\n    centeredSlides: true,\n    spaceBetween: 30,\n    loop: true,\n    autoplay: true,\n    delay: 4000,\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n    },\n    navigation: {\n      prevEl: '.swiper-main__prev',\n      nextEl: '.swiper-main__next'\n    },\n    slideToClickedSlide: true,\n    preloadImages: false,\n    lazy: true,\n    loadOnTransitionStart: true\n  });\n\n  const swiperSpecialist = new Swiper('.swiper-specialist', {\n    initialSlide: 0,\n    spaceBetween: 30,\n    centeredSlides: false,\n    allowTouchMove: false,\n    navigation: {\n      nextEl: '.specialists__next',\n      prevEl: '.specialists__prev',\n    },\n    breakpoints: {\n      480: {\n        spaceBetween: 10,\n        slidesPerView: 2\n      },\n      768: {\n        spaceBetween: 20,\n        slidesPerView: 3\n      },\n      992: {\n        slidesPerView: 4\n      },\n      1200: {\n        slidesPerView: 5\n      },\n      1500: {\n        slidesPerView: 6\n      }\n    }\n  });\n\n  const swipersComments = new Swiper('.swiper-comments', {\n    initialSlide: 0,\n    centeredSlides: true,\n    loop: true,\n    autoplay: false,\n    navigation: {\n      nextEl: '.comments__next',\n      prevEl: '.comments__prev',\n    },\n  });\n\n  const swipersComments2 = new Swiper('.swiper-comments-2', {\n    initialSlide: 0,\n    centeredSlides: true,\n    loop: true,\n    autoplay: false,\n    navigation: {\n      nextEl: '.comments__next',\n      prevEl: '.comments__prev',\n    },\n  });\n\n\n  /**\n   * После инициализации всех слайдеров с комментами скрываем их\n   * видны будут только те у которых есть класс .active\n   */\n  const commentsWrap = document.querySelectorAll('.comments__swiper');\n  commentsWrap.forEach(el => el.style.display = 'none');\n\n\n  /** Табы внутри блока отзывов */\n  const clinicWrap = document.querySelector('[data-wrap=\"clinic\"]');\n  const specialistWrap = document.querySelector('[data-wrap=\"specialist\"]');\n  const btnClinic = document.querySelector('[data-btn=\"clinic\"]');\n  const btnSpecialist = document.querySelector('[data-btn=\"specialist\"]');\n\n  function toggleFeedback() {\n    btnClinic.classList.toggle('active');\n    btnSpecialist.classList.toggle('active');\n    clinicWrap.classList.toggle('active');\n    specialistWrap.classList.toggle('active');\n  }\n\n  btnClinic && btnClinic.addEventListener('click', toggleFeedback);\n  btnSpecialist && btnSpecialist.addEventListener('click', toggleFeedback);\n\n\n  /**\n   * Ленивая загрузка видео\n   * событие скролла удаляется по достижению 50% прокрутки до видео\n   */\n  const videoWrap = document.querySelector('.video');\n\n  if (videoWrap) {\n    const video = videoWrap.querySelector('video');\n    const videoScrollTop = Math.ceil(video.getBoundingClientRect().top);\n\n    window.addEventListener('scroll', loadVideo);\n\n    function loadVideo() {\n      const scrollTop = window.pageYOffset;\n\n      if (scrollTop > videoScrollTop / 2) {\n        window.removeEventListener('scroll', loadVideo);\n\n        const source = video.querySelector('source');\n        const urlVideo = source.dataset.src;\n        source.setAttribute('src', urlVideo);\n        video.load();\n\n        /** Вешаем обработчик на воспроизведение/остановку видео */\n        videoWrap.addEventListener('click', async event => {\n\n          if (video.paused) {\n            await video.play();\n            videoWrap.style.background = 'url(../images/other/pattern.png) center repeat';\n            video.controls = true;\n          } else {\n            video.pause();\n            video.controls = false;\n          }\n\n          event.target.closest('.video').classList.toggle('play');\n        });\n      }\n    }\n  }\n\n\n  /** Календарь в модалке */\n  $('#datepicker').datepicker({\n    minDate: new Date(),\n    onSelect: function (dateText) {\n      $('#appointment-date').val(dateText);\n    }\n  });\n\n\n  /** Инициализация модалок */\n  const modalCallFeedback = new Modal({\n    idModal: 'modal-call-feedback',\n    selectorBtnOpen: '[data-btn=\"modal-call-feedback-btn\"]'\n  });\n\n  const modalDoctorCall = new Modal({\n    idModal: 'modal-doctor-call',\n    selectorBtnOpen: '[data-btn=\"modal-doctor-call-btn\"]'\n  });\n\n  const modalAppointment = new Modal({\n    idModal: 'modal-appointment',\n    selectorBtnOpen: '[data-btn=\"modal-appointment-btn\"]'\n  });\n\n  const modalFeedback = new Modal({\n    idModal: 'modal-feedback',\n    selectorBtnOpen: '[data-btn=\"modal-feedback-btn\"]'\n  });\n\n  const modalThanksFeedback = new Modal({\n    idModal: 'modal-thanks-feedback',\n    selectorBtnOpen: '[data-btn=\"modal-thanks-feedback-btn\"]'\n  });\n\n  const modalThanksAppointment = new Modal({\n    idModal: 'modal-thanks-appointment',\n    selectorBtnOpen: '[data-btn=\"modal-thanks-appointment-btn\"]'\n  });\n\n\n  /** Проверка согласия на обработку персональных данных */\n  function checkAgree() {\n    const btn = this.closest('form').querySelector('.button');\n    btn.toggleAttribute('disabled');\n  }\n  document.getElementById('call-feedback-checkbox').addEventListener('change', checkAgree);\n  document.getElementById('doctor-call-checkbox').addEventListener('change', checkAgree);\n  document.getElementById('appointment-checkbox').addEventListener('change', checkAgree);\n\n\n  /** Плавная прокрутка до якоря */\n  const anchors = document.querySelectorAll('a[href*=\"$\"]');\n  if (anchors.length) {\n    anchors.forEach(anchor => {\n      anchor.addEventListener('click', function (e) {\n        e.preventDefault();\n\n        const elementClick = this.getAttribute('href').split('');\n        elementClick.splice(0, 1, '#');\n        const normalName = elementClick.join('');\n        const destination = $(normalName).offset().top - 130;\n\n        $(\"html:not(:animated),body:not(:animated)\").animate({scrollTop: destination}, 1100);\n      })\n    });\n  }\n\n\n  /** Маска номера телефона на поля. Maskedinput */\n  $(\"#call-feedback-tel\").mask(\"+7 (999) 999-9999\");\n  $(\"#call-doctor-call-tel\").mask(\"+7 (999) 999-9999\");\n  $(\"#call-appointment-tel\").mask(\"+7 (999) 999-9999\");\n\n\n  /** Инициализация галереи fancybox */\n  document.querySelector('[data-fancybox=\"gallery\"]') && $('[data-fancybox=\"gallery\"]').fancybox({\n    toolbar: false,\n    transitionEffect: \"zoom-in-out\",\n    loop: true\n  });\n\n\n  /** Спойлеры услуг */\n  const spoilerWrap = document.querySelector('.amenities__spoilers');\n  if (spoilerWrap) {\n    const spoilers = document.querySelectorAll('.spoiler');\n    spoilers.forEach(spoiler => {\n      new Spoiler({\n        spoiler,\n        wrap: spoilerWrap\n      })\n    });\n  }\n});\n\n\n/** Управляем событиями */\nclass ManagementEvents {\n\n  /**\n   * На входе принимаем объект с параметрами\n   * arr   - массив куда сохраняем события\n   * el    - элемент, на который навешиваем обработчик\n   * event - событие (str)\n   * fn    - анонимная функция без вызова\n   * @param data\n   */\n  static addEventToArr(data) {\n    /** Добавляем событие в массив */\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\n\n    /** Вешаем слушатель */\n    data.el.addEventListener(data.event, data.fn);\n\n    return true\n  }\n\n  /**\n   * На входе принимаем массив событий\n   * @param arr\n   */\n  static removeEvents(arr) {\n    /** Снимаем обработчики события */\n    arr.forEach(item => {\n      item.el.removeEventListener(item.event, item.fn)\n    });\n\n    /** Очищаем массив */\n    arr.splice(0, arr.length);\n\n    return true;\n  }\n}\n\nclass Modal {\n  constructor(data) {\n    this.arrEvents = [];\n    this._modal = document.getElementById(data.idModal);\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\n\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\n\n    this.bind();\n  }\n\n  open() {\n    this._modal.classList.add('modal_open');\n    this._modalWindow.classList.add('modal__window_open');\n  }\n  close() {\n    this._modal.classList.remove('modal_open');\n    this._modalWindow.classList.remove('modal__window_open');\n  }\n\n  bind() {\n    /**\n     * Открытие модалки по клику на кнопку\n     */\n    this._btnsOpen.forEach(btn => {\n      ManagementEvents.addEventToArr({\n        arr: this.arrEvents,\n        el: btn,\n        event: 'click',\n        fn: () => this.open()\n      });\n    });\n\n\n    /**\n     * Закрытие модалки по клику вне нее\n     */\n    ManagementEvents.addEventToArr({\n      arr: this.arrEvents,\n      el: this._modal,\n      event: 'click',\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\n    });\n\n    /**\n     * Закрытие модалки по клику на крестик\n     */\n    ManagementEvents.addEventToArr({\n      arr: this.arrEvents,\n      el: this._btnClose,\n      event: 'click',\n      fn: () => this.close()\n    });\n  }\n\n  destroy() {\n    ManagementEvents.removeEvents(this.arrEvents);\n    this._modal.remove();\n  }\n}\n\nclass Spoiler {\n  constructor(data) {\n    this.spoiler = data.spoiler;\n    this.body = this.spoiler.querySelector('.spoiler__body');\n    this.wrap = data.wrap;\n    this.spoilers = null;\n    this.height = null;\n\n    this._initialize();\n  }\n\n  open() {\n    this.spoiler.classList.add('open');\n    this.body.style.height = `${this.height}px`;\n  }\n\n  close() {\n    this.spoiler.classList.remove('open');\n    this.body.style.height = '0px';\n  }\n\n  closeAll() {\n    this.spoilers.forEach(spoiler => {\n      spoiler.classList.remove('open');\n      spoiler.querySelector('.spoiler__body').style.height = '0px';\n    });\n  }\n\n  _initialize() {\n    this.height = this.body.clientHeight;\n    this.body.style.height = '0px';\n\n    /** если есть this.wrap, значит включен режим аккордеона */\n    if (this.wrap) this.spoilers = this.wrap.querySelectorAll('.spoiler');\n\n    this.spoiler.addEventListener('click', event => {\n      const spoiler = event.target.closest('.spoiler');\n      if (!spoiler) return;\n\n      /** открываем или закрываем спойлер */\n      const open = spoiler.classList.contains('open');\n      if (open) {\n        this.close();\n      } else {\n        this.wrap && this.closeAll();\n        this.open();\n      }\n    });\n  }\n}"]}